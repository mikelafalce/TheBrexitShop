<p id="notice"><%= notice %></p>

<p>
  <strong>Title:</strong>
  <%= @product.title %>
</p>

<p>
  <strong>Image:</strong>
  <%= @product.image %>
</p>

<p>
  <strong>Description:</strong>
  <%= @product.description %>
</p>

<p>
  <strong>Category:</strong>
  <%= @product.category.name %>
</p>

<p>
  <strong>Price:</strong>
  <%= @product.price %>
</p>
<% if user_signed_in? && can?(:manage, @product) %>
  <%= link_to 'Edit', edit_product_path(@product) %> |
<% end %>
<% if user_signed_in?%>
  <%= link_to "", class: "button", data: {target: @cart_action, addUrl: add_to_cart_path(@product), removeUrl: remove_from_cart_path(@product)} do%>
    <i class="fi-shopping-cart"></i>
    <span><%=@cart_action%></span> Cart
  <%end%>
<%end%>
<%#= link_to 'Back', products_path %>
<hr>
<%= form_for([@product, @review]) do |f| %>
  <% if @review.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(review.errors.count, "error") %> prohibited this review from being saved:</h2>

      <ul>
      <% @review.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :rating %>
    <%= f.number_field :rating %>
  </div>

  <div class="field">
    <%= f.label :comment %>
    <%= f.text_area :comment %>
  </div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>

<hr>
<% if @reviews.blank? %>
  <h3>No reviews just yet, click here to add yours</h3>
<% else %>
  <h3>Reviews</h3>
  <div id='reviews'>
    <% @reviews.each do |review| %>
      <%= review.user.username %>:
      <%= review.rating %>
      <%= review.comment %>
    <% end %>
</div>
<% end %>
